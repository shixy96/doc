# 流布局

## 常规流
常规流中的任何一个盒子总是某个 formatting context 中的一部分，块级盒子是在 block formatting context 中工作的盒子，而內联盒子是在 inline formatting context 中工作的盒子。任何一个盒子总是块级盒子或內联盒子中的一种。

盒子本身有一个外部显示类型，所以它知道如何与其他盒子一起工作；另外有一个内部显示类型，它改变了它的子元素的行为方式。

### 块级盒子
在一个块格式区域中，盒子会从包含块的顶部开始，按序垂直排列。同级盒子件的垂直距离会由 `margin` 决定。相邻两个块级盒子之间的垂直间距会遵循[外边距折叠原则](./margin.md)被折叠。在一个块格式区域中，每个盒子的左外边缘会与包含块左外边缘重合。
默认情况下，块级元素会占据內联方向上的所有空间。

### block formatting context
块级盒子布局过程发生的区域，也是浮动元素与其他元素交互的区域。

#### 创建方法：
- float 不为 none
- position 为 absolute 或者 fixed
- display: inline-block/table 相关/flow-root
- overflow 不为 visible 或 clip 的块级元素
- flex 直接子元素
- grid 直接子元素
- 多列容器（column）
#### 作用
- 排除外部 flow
- 包含内部 flow
- 阻止外边距重叠

> 弹性/网格容器（display：flex/grid/inline-flex/inline-grid）建立新的弹性/网格格式化上下文，除布局之外，它与区块格式化上下文类似。弹性/网格容器中没有可用的浮动子级，但排除外部浮动和阻止外边距重叠仍然有效。

### 內联盒子
在內联格式区域中，盒子会从包含块的顶部开始，按水平排列。只有 ***水平外边距、边框、内边距*** 会被保留，垂直填充和边框可能会在内容的上方和下方重叠。
这些盒子可以以不同的方式在垂直方向上对齐。如果包含块中没有足够的空间容纳所有的內联元素，则內联元素可以换行，创建的行称为`inline box`。
> inline 元素的大小就是其本身的大小。

## 浮动
在浮动定位中，浮动盒子会浮动到当前行的开始或尾部位置。这会导致普通流中的文本及其他内容会“流”到浮动盒子的边缘处，除非元素通过 `clear` 清除了前面的浮动。
