成本定量：

- 读取一个页面花费的成本默认是 1.0
- 读取以及检测一条记录是否符合搜索条件的成本默认是 0.2

> 读取记录时，即使不需要检测记录是否符合搜索条件，其成本也是 0.2



成本最低的方案就是执行计划。



```
查询成本 = I/O 成本 + CPU 成本
```



##### 全表扫描

- 聚簇索引占用的页面数
- 该表中的记录数



```
SHOW TABLE STATUS LIKE '...'

---------
ROWS: 对 MyISAM 存储引擎的表是准确的，InnoDB 的表是一个估值
Data_length = 聚簇索引的页面数量 * 每个页面的大小（默认 16 KB）
```



MySql 查询优化器先分析使用唯一二级索引的成本，再分析使用普通索引的成本



##### 二级索引

- 扫描区间的数量
  - 查询优化器认为读取索引的一个扫描区间的IO成本和读取一个页面的IO成本是相同的
- 需要回表的记录数
  - 读取二级索引的记录数量 * 0.2
  - 每次回表都相当于访问一个页面，读取二级索引的记录数量 * 1.0
  - 回表读取聚簇索引的记录 * 0.2



IO成本 = 扫描区间的数量 * 1.0 + 预估二级索引的记录数量 * 1.0

CPU成本 = 读取二级索引记录的成本 * 0.2 + 读取回表后的聚簇索引的成本 * 0.2